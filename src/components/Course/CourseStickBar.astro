---
import { ArrowRight, CalendarDays } from "@lucide/astro";
---

<div
  id="sticky-bar"
  class="fixed bottom-0 left-0 right-0 z-40 border-t border-zinc-300 bg-white/80 backdrop-blur-md transition-all duration-300 translate-y-full opacity-0 pointer-events-none"
>
  <div class="mx-auto flex max-w-7xl items-center justify-between px-6 py-3">
    <div class="hidden sm:block">
      <p class="font-semibold text-foreground">Metodo Dullius</p>
      <p class="text-sm text-zinc-800">A partir de 2 anos - Vagas limitadas</p>
    </div>

    <div class="flex w-full gap-3 sm:w-auto">
      <a
        href="#contato"
        class="flex-1 sm:flex-initial inline-flex items-center justify-center rounded-full bg-red-700 px-6 py-2 font-medium text-white hover:bg-red-600 transition-colors text-sm md:text-base"
      >
        <span class="hidden sm:inline">Quero me inscrever</span>
        <span class="sm:hidden">Inscreva-se</span>
        <ArrowRight class="ml-2 h-4 w-4" />
      </a>

      <a
        href="#contato"
        class="flex-1 sm:flex-initial inline-flex items-center justify-center rounded-full border border-zinc-300 bg-white px-6 py-2 font-medium text-zinc-900 hover:bg-secondary transition-colors text-sm md:text-base"
      >
        <CalendarDays class="mr-2 h-4 w-4" />
        <span class="hidden sm:inline">Agendar Aula</span>
        <span class="sm:hidden">Experimente</span>
      </a>
    </div>
  </div>
</div>

<script>
  const stickyBar = document.getElementById("sticky-bar");
  const heroSection = document.getElementById("inicio");

  if (stickyBar && heroSection) {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (!entry.isIntersecting) {
          // Hero section is not visible - show sticky bar
          stickyBar.classList.remove(
            "translate-y-full",
            "opacity-0",
            "pointer-events-none",
          );
          stickyBar.classList.add("translate-y-0", "opacity-100");
        } else {
          // Hero section is visible - hide sticky bar
          stickyBar.classList.remove("translate-y-0", "opacity-100");
          stickyBar.classList.add(
            "translate-y-full",
            "opacity-0",
            "pointer-events-none",
          );
        }
      },
      { threshold: 0 },
    );

    observer.observe(heroSection);
  }
</script>
