---
// VideoSection.astro
import { Play } from "@lucide/astro";
---

<section class="bg-secondary py-24 lg:py-32">
  <div class="mx-auto max-w-7xl px-6">
    <div class="grid items-center gap-12 lg:grid-cols-2">
      <div>
        <p class="text-sm font-semibold uppercase tracking-widest text-accent">
          Conheca a Dullius
        </p>
        <h2 class="mt-3 text-4xl text-foreground md:text-5xl text-balance">
          Uma historia de sucesso
        </h2>
        <p class="mt-6 text-lg text-zinc-800 leading-relaxed">
          Ha mais de 30 anos, a Dullius Dance transforma vidas por meio da
          danca. Nossa escola e referencia em Porto Alegre pela qualidade do
          ensino, inovacao e pelo carinho com cada aluno.
        </p>
        <p class="mt-4 text-lg text-zinc-800 leading-relaxed">
          Assista ao video e sinta a magia que so a Dullius pode proporcionar.
        </p>
        <div class="mt-8 flex flex-col gap-6 sm:flex-row sm:gap-12">
          <div>
            <p class="text-4xl text-foreground">+ de 30</p>
            <p class="mt-1 text-sm text-zinc-800">Anos de historia</p>
          </div>
          <div>
            <p class="text-4xl text-foreground">+ de 5.000</p>
            <p class="mt-1 text-sm text-zinc-800">Alunos formados</p>
          </div>
        </div>
      </div>

      <div class="relative">
        <div
          class="group relative cursor-pointer overflow-hidden rounded-2xl"
          data-video-thumbnail
        >
          <div class="relative aspect-video duration-300 group-hover:scale-105">
            <img
              src="/images/short-1.jpg"
              alt="Video de apresentacao da Dullius Dance"
              class="absolute inset-0 h-full w-full object-cover"
            />
            <div
              class="absolute inset-0 bg-zinc-900/30 transition-all duration-300 group-hover:bg-foreground/40"
            >
            </div>
          </div>
          <button
            type="button"
            class="absolute inset-0 flex items-center justify-center"
            aria-label="Reproduzir video"
            data-play-button
          >
            <div
              class="flex h-20 w-20 items-center justify-center rounded-full bg-red-700 text-white shadow-2xl transition-transform hover:cursor-pointer"
            >
              <Play class="ml-1 h-8 w-8" />
            </div>
          </button>
        </div>

        <div
          class="relative aspect-video overflow-hidden rounded-2xl hidden bg-red-50"
          data-video-iframe
        >
          <iframe
            src=""
            data-video-src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1"
            title="Dullius Dance - Apresentacao"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
            class="absolute inset-0 h-full w-full"></iframe>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const playButton = document.querySelector("[data-play-button]");
  const thumbnail = document.querySelector("[data-video-thumbnail]");
  const videoIframe = document.querySelector("[data-video-iframe]");
  const iframe = videoIframe?.querySelector("iframe");

  playButton?.addEventListener("click", () => {
    // Hide thumbnail
    thumbnail?.classList.add("hidden");

    // Show and activate iframe
    videoIframe?.classList.remove("hidden");

    // Set src to start autoplay
    if (iframe) {
      const videoSrc = iframe.getAttribute("data-video-src");
      if (videoSrc) {
        iframe.src = videoSrc;
      }
    }
  });
</script>
