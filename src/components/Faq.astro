---
import { ChevronDown, ArrowRight } from "@lucide/astro";

const faqs = [
  {
    question: "A partir de que idade meu filho(a) pode comecar?",
    answer:
      "O Metodo Dullius aceita criancas a partir de 2 anos de idade. Temos turmas especiais (Baby Class) para os pequeninos de 2 a 3 anos, com aulas adaptadas de forma ludica e acolhedora, respeitando o desenvolvimento de cada crianca.",
  },
  {
    question: "Precisa ter experiencia previa em danca?",
    answer:
      "Nao! O Metodo Dullius e perfeito para iniciantes. As aulas sao estruturadas para que cada crianca evolua no seu ritmo, de forma natural e prazerosa. Nao e necessaria nenhuma experiencia anterior.",
  },
  {
    question: "Como funciona a aula experimental?",
    answer:
      "A aula experimental e gratuita e sem compromisso. Basta agendar pelo WhatsApp ou telefone, e seu filho(a) participara de uma aula completa com a turma da faixa etaria correspondente. E a melhor forma de conhecer o metodo na pratica!",
  },
  {
    question: "O que a crianca deve vestir na aula?",
    answer:
      "Para a aula experimental, roupa confortavel (legging, camiseta e meias) e suficiente. Apos a matricula, fornecemos informacoes sobre o uniforme oficial da escola, que inclui collant, meia-calca e sapatilha.",
  },
  {
    question: "Qual a frequencia das aulas?",
    answer:
      "As aulas acontecem de 1 a 3 vezes por semana, dependendo da turma e faixa etaria. Temos opcoes nos turnos da manha, tarde e sabado de manha, para atender diferentes rotinas familiares.",
  },
  {
    question: "Os pais podem assistir as aulas?",
    answer:
      "Na fase de adaptacao, os pais podem acompanhar de perto. Apos esse periodo, temos uma recepção confortavel onde os pais aguardam, e realizamos aulas abertas periodicas para que acompanhem a evolucao dos filhos.",
  },
  {
    question: "Como funciona o pagamento e valores?",
    answer:
      "Oferecemos planos mensais com descontos progressivos para pagamento semestral ou anual. Os valores variam conforme a frequencia semanal. Entre em contato conosco para receber a tabela atualizada de valores.",
  },
  {
    question: "Tem apresentacoes e espetaculos?",
    answer:
      "Sim! Realizamos o espetaculo anual 'A Magia do Palco', que e um dos momentos mais esperados do ano. Todas as turmas participam, desde a Baby Class ate as turmas juvenis. Tambem realizamos o 'Show de Talentos' e outras apresentacoes ao longo do ano.",
  },
];
---

<section id="faq" class="py-24 lg:py-32">
  <div class="mx-auto max-w-7xl px-6">
    <div class="flex flex-col gap-16 lg:flex-row lg:gap-20">
      <!-- Left column - heading -->
      <div class="lg:w-1/3 lg:sticky lg:top-32 lg:self-start">
        <p class="text-sm font-semibold uppercase tracking-widest text-accent">
          Perguntas Frequentes
        </p>
        <h2
          class="mt-3 font-serif text-4xl text-foreground md:text-5xl text-balance"
        >
          Tire suas duvidas
        </h2>
        <p class="mt-4 text-lg text-zinc-800 leading-relaxed">
          Reunimos as perguntas mais comuns sobre o Metodo Dullius. Nao
          encontrou o que procura?
        </p>

        <a
          href="#contato"
          class="mt-6 inline-flex items-center rounded-full bg-accent px-6 py-2 text-accent-foreground hover:bg-accent/90 transition-colors"
        >
          Fale Conosco
          <ArrowRight class="ml-2 h-4 w-4" />
        </a>
      </div>
      <!-- Right column - accordion -->
      <div class="lg:w-2/3">
        <div class="flex flex-col">
          {
            faqs.map((faq, index) => (
              <div class="border-b border-zinc-200" data-faq-item>
                <button
                  type="button"
                  class="flex w-full items-start justify-between gap-4 py-6 text-left"
                  data-faq-button
                  data-index={index}
                  aria-expanded={index === 0 ? "true" : "false"}
                >
                  <span class="text-base font-medium text-zinc-900 leading-relaxed pr-4">
                    {faq.question}
                  </span>
                  <ChevronDown
                    class={`mt-1 h-5 w-5 shrink-0 text-zinc-800 transition-transform duration-300 ${
                      index === 0 ? "rotate-180" : ""
                    }`}
                    data-faq-icon
                  />
                </button>
                <div
                  class={`overflow-hidden transition-all duration-300 ${
                    index === 0
                      ? "max-h-96 pb-6 opacity-100"
                      : "max-h-0 opacity-0"
                  }`}
                  data-faq-content
                >
                  <p class="text-zinc-800 leading-relaxed pr-10">
                    {faq.answer}
                  </p>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  let openIndex = 0;

  const buttons = document.querySelectorAll("[data-faq-button]");

  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      const index = parseInt(button.getAttribute("data-index"));
      const faqItem = button.closest("[data-faq-item]");
      const content = faqItem.querySelector("[data-faq-content]");
      const icon = faqItem.querySelector("[data-faq-icon]");

      // If clicking the already open item, close it
      if (openIndex === index) {
        openIndex = null;
        button.setAttribute("aria-expanded", "false");
        content.classList.remove("max-h-96", "pb-6", "opacity-100");
        content.classList.add("max-h-0", "opacity-0");
        icon.classList.remove("rotate-180");
      } else {
        // Close previously open item
        if (openIndex !== null) {
          const prevButton = document.querySelector(
            `[data-faq-button][data-index="${openIndex}"]`,
          );
          const prevItem = prevButton.closest("[data-faq-item]");
          const prevContent = prevItem.querySelector("[data-faq-content]");
          const prevIcon = prevItem.querySelector("[data-faq-icon]");

          prevButton.setAttribute("aria-expanded", "false");
          prevContent.classList.remove("max-h-96", "pb-6", "opacity-100");
          prevContent.classList.add("max-h-0", "opacity-0");
          prevIcon.classList.remove("rotate-180");
        }

        // Open new item
        openIndex = index;
        button.setAttribute("aria-expanded", "true");
        content.classList.remove("max-h-0", "opacity-0");
        content.classList.add("max-h-96", "pb-6", "opacity-100");
        icon.classList.add("rotate-180");
      }
    });
  });
</script>
